<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN"
                         "concept.dtd" [<!ENTITY % entities PUBLIC '-//XDOC//ENTITIES//FujitsuUserDoc' 'entities.dtd'>
]>

<concept id="concept_E8D43EB4494E41D2AB42D4A89396D1AB"
                    xml:lang="en-us">
    <title>Configuring the Monitoring API</title>
    <conbody>
        <section>
            <p>The configuration of the Monitoring API must be updated for the keystore you have created.</p>
            <p>To configure the Monitoring API for HTTPS, carry out the following steps:</p>
            <ol compact="no">
                <li>Log in to the host where the <ph
                        conref="../../shared/product-name.xml#ProductNameTopic/Product_Abbr"/> Service is installed</li>
                <li>
                    <p>Specify the keystore parameters.</p>
                    <p>For this purpose, open the <codeph>api_config.yml</codeph> file with your favorite editor. It defines the configuration settings for the Monitoring API. </p>
                    <codeblock>sudo vim /etc/monasca/api-config.yml</codeblock>
                </li>
                <li>
                    <p>Specify the <codeph>keyStorePath</codeph>, <codeph>keyStorePassword</codeph>, and  <codeph>validateCerts</codeph> parameters  in the <codeph>applicationConnectors</codeph> section of the <codeph>api-config.yml</codeph> file.</p>
                    <p>Example: </p>
                    <codeblock>server:
  applicationConnectors:
    - type: https
      bindHost: "10.124.154.8"
      port: 8070
      maxRequestHeaderSize: 16KiB  # Allow large headers used by keystone tokens
      keyStorePath: /opt/keystore/monasca.keystore
      keyStorePassword: monascaroot
      validateCerts: false</codeblock>
                </li>
                <li>
                    <p>To restart the Monitoring API, execute the following command:</p>
                    <codeblock>systemctl restart monasca-api</codeblock>
                </li>
            </ol>
        </section>
    </conbody>
</concept>
