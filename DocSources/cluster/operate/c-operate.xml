<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright FUJITSU LIMITED 2017 -->
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN"
                         "concept.dtd" [<!ENTITY % entities PUBLIC '-//XDOC//ENTITIES//FujitsuUserDoc' 'entities.dtd'>
]>

<concept id="concept_E8D43EB4494E41D2AB42D4A89396D1AB"
                    xml:lang="en-us">
    <title>Operation and Maintenance</title>
    <conbody>
        <section>
            <p>Regular operation and maintenance includes: </p>
            <p>
                <ul>
                    <li>Starting and stopping agents and services.</li>
                    <li>Disabling the monitoring of specific metrics in the configuration of a <ph
                            conref="../../shared/product-name.xml#ProductNameTopic/Product_Abbr"/> Metrics Agent.</li>
                    <li>Disabling the collection of specific log data in the configuration of a <ph
                            conref="../../shared/product-name.xml#ProductNameTopic/Product_Abbr"/> Log Agent.</li>
                    <li>Configuring data retention for the InfluxDB database.</li>
                    <li>Configuring data retention for the Elasticsearch database.</li>
                    <li>Removing metrics data from the InfluxDB database.</li>
                    <li>Removing log data from the Elasticsearch database.</li>
                    <li>Handling log files of agents and services.</li>
                    <li>Backup and recovery of databases, configuration files, and dashboards.</li>
                </ul>
            </p>
        </section>
        <section>
            <p>This chapter has to describe the regular operation and maintenance tasks relevant for the CMM cluster.</p>
            <p>****</p>
            <p><b>Part 1 <b>Info on starting/stopping agents and services</b></b></p>
            <p><i>Can the services.yml file for starting and stopping agents and services be configured for the whole cluster?</i></p>
            <p><i>If yes, are manual steps required to configure the files? </i></p>
            <p>***</p>
            <p><b>Part 2 Info on:</b></p>
            <p>
                <ul>
                    <li>Starting/stopping individual services</li>
                    <li>Disabling metrics for a metrics agent</li>
                    <li>Disabling log data for a log agent</li>
                    <li>Removing metrics data and removing log data</li>
                </ul>
            </p>
            <p><i>Documentation already exists, but related to one host only. It is assumed that the actions must simply be repeated for each node in the cluster. Correct? KC: it should work, testing required</i></p>
            <p>****</p>
            <p><b>Part 3 Log File Handling</b></p>
            <p><i>Can systemd and journald be used for addressing log files on multiple nodes? KC: it should work, testing required</i></p>
            <p>******</p>
            <p><b>Part 4 Backup and Recovery</b></p>
            <ul>
                <li>Backup Elasticsearch, InfluxDB, MariaDB<p><i>Input is already available on how to backup the DBs in cluster environment</i></p></li>
                <li><p>Backup of config files</p><i>Input is required on how to backup the log files in cluster environment</i><p>Back up of dashboards > already described, no changes for cluster</p></li>
            </ul>
            <p>******</p>
            <p><b>Part n ?</b></p>
            <p><i>What else is relevant for operation/maintenance of cluster? </i></p>
            <p><i>What else is relevant for recovering from failures to a healthy state?</i></p>
            <p>******</p>
            <p><b>Fail-over scenarios:</b></p>
            <ul>
                <li>One or more of the three nodes fail, bring a node back to operation </li>
                <li>Nodes are still up and running, but can't communicate with each other any longer</li>
                <li>Individual component fails, bring back to operation</li>
                <li>Load balancer down</li>
                <li>Load balancer can't communicate with cluster nodes </li>
            </ul>
            <p>******</p>
            <p><b>Are there known restrictions? Do we want to mention them?</b></p>
            <ul>
                <li>Cases where data loss occurs, even so it should not.</li>
                <li>Cases where data loss may be acceptable from a user's point of view. </li>
            </ul>
        </section>
    </conbody>
</concept>
